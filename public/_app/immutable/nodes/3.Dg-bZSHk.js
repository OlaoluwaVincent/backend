import{s as se,a as X,n as Y,r as le}from"../chunks/scheduler.Cs0xm5t1.js";import{S as re,i as ne,e as d,s as w,t as te,h as oe,c as f,d as u,a as P,b as k,g as J,f as ae,j as a,k as r,l as R,m as Z,p as ie,n as ce}from"../chunks/index.4yL1hOMo.js";import{g as de}from"../chunks/entry.mmPx7nZV.js";import{p as fe}from"../chunks/prediction.DwZUs3oj.js";function $(m){let t,s;return{c(){t=d("p"),s=te(m[2]),this.h()},l(e){t=f(e,"P",{class:!0});var l=k(t);s=ae(l,m[2]),l.forEach(u),this.h()},h(){a(t,"class","text-error")},m(e,l){R(e,t,l),r(t,s)},p(e,l){l&4&&ce(s,e[2])},d(e){e&&u(t)}}}function ee(m){let t;return{c(){t=d("span"),this.h()},l(s){t=f(s,"SPAN",{class:!0}),k(t).forEach(u),this.h()},h(){a(t,"class","loading loading-spinner")},m(s,e){R(s,t,e)},d(s){s&&u(t)}}}function ue(m){let t,s,e,l,D="Back",y,h,E,U=`Select an image of any rashes that have appeared on
      your skin. <b>(optional)</b>`,x,p,n,L='<span class="label-text-alt">Pick a file</span>',S,T,V,F,A,g,M,j,b,B,_,C,q,G,K,o=m[2]&&$(m),i=m[1]&&ee();return{c(){t=d("meta"),s=w(),e=d("form"),l=d("a"),l.textContent=D,y=w(),h=d("aside"),E=d("p"),E.innerHTML=U,x=w(),p=d("label"),n=d("div"),n.innerHTML=L,S=w(),T=d("input"),V=w(),F=d("aside"),A=d("div"),g=d("img"),j=w(),b=d("div"),o&&o.c(),B=w(),_=d("button"),i&&i.c(),C=te(`
      Process Image`),this.h()},l(c){const v=oe("svelte-xyb35t",document.head);t=f(v,"META",{name:!0,content:!0}),v.forEach(u),s=P(c),e=f(c,"FORM",{class:!0});var I=k(e);l=f(I,"A",{href:!0,class:!0,"data-svelte-h":!0}),J(l)!=="svelte-18c6hk3"&&(l.textContent=D),y=P(I),h=f(I,"ASIDE",{class:!0});var H=k(h);E=f(H,"P",{"data-svelte-h":!0}),J(E)!=="svelte-si1ifp"&&(E.innerHTML=U),x=P(H),p=f(H,"LABEL",{class:!0});var N=k(p);n=f(N,"DIV",{class:!0,"data-svelte-h":!0}),J(n)!=="svelte-6qblgn"&&(n.innerHTML=L),S=P(N),T=f(N,"INPUT",{type:!0,accept:!0,class:!0}),N.forEach(u),H.forEach(u),V=P(I),F=f(I,"ASIDE",{class:!0});var Q=k(F);A=f(Q,"DIV",{class:!0});var W=k(A);g=f(W,"IMG",{class:!0,src:!0,alt:!0}),W.forEach(u),Q.forEach(u),j=P(I),b=f(I,"DIV",{class:!0});var O=k(b);o&&o.l(O),B=P(O),_=f(O,"BUTTON",{type:!0,class:!0});var z=k(_);i&&i.l(z),C=ae(z,`
      Process Image`),z.forEach(u),O.forEach(u),I.forEach(u),this.h()},h(){document.title="FlickID Beta|Image",a(t,"name","description"),a(t,"content","FlickId is a risk assessment tool for monkeypox."),a(l,"href","/"),a(l,"class","link mt-4 text-center col-span-6 -order-1"),a(n,"class","label"),a(T,"type","file"),a(T,"accept","image/*"),a(T,"class","file-input file-input-bordered w-full max-w-xs"),a(p,"class","form-control w-full max-w-xs"),a(h,"class","col-span-6 order-2 md:order-1 md:col-span-3"),a(g,"class","w-full h-full aspect-square mx-auto"),X(g.src,M=m[0]??"https://via.placeholder.com/300?text=FlickId+Beta")||a(g,"src",M),a(g,"alt","The selected file"),a(A,"class","rounded-lg overflow-hidden mx-auto"),a(F,"class","col-span-6 order-1 md:order-2 md:col-span-3"),a(_,"type","submit"),_.disabled=q=m[1]||!m[0],a(_,"class","btn btn-block mx-auto btn-success text-white max-w-xl"),a(b,"class","col-span-6 mx-auto order-3"),a(e,"class","place-items-center grid grid-cols-6 gap-3 space-y-6 p-5 md:p-0 md:h-[90vh] lg:h-full")},m(c,v){r(document.head,t),R(c,s,v),R(c,e,v),r(e,l),r(e,y),r(e,h),r(h,E),r(h,x),r(h,p),r(p,n),r(p,S),r(p,T),r(e,V),r(e,F),r(F,A),r(A,g),r(e,j),r(e,b),o&&o.m(b,null),r(b,B),r(b,_),i&&i.m(_,null),r(_,C),G||(K=[Z(T,"change",m[5]),Z(e,"submit",ie(m[4]))],G=!0)},p(c,[v]){v&1&&!X(g.src,M=c[0]??"https://via.placeholder.com/300?text=FlickId+Beta")&&a(g,"src",M),c[2]?o?o.p(c,v):(o=$(c),o.c(),o.m(b,B)):o&&(o.d(1),o=null),c[1]?i||(i=ee(),i.c(),i.m(_,C)):i&&(i.d(1),i=null),v&3&&q!==(q=c[1]||!c[0])&&(_.disabled=q)},i:Y,o:Y,d(c){c&&(u(s),u(e)),u(t),o&&o.d(),i&&i.d(),G=!1,le(K)}}}function me(m,t,s){let e,l,D=!1,y="";function h(x){const p=x.currentTarget;if(!p.files)return;l=p.files[0];let n=new FileReader;n.readAsDataURL(l),n.onload=L=>{var S;s(0,e=(S=L.target)==null?void 0:S.result)}}function E(x){const p=new FormData;p.append("image",l,l.name),s(1,D=!0),fetch("/api/predict",{method:"POST",body:p}).then(n=>n.json()).then(n=>{n.error?s(2,y=n.error):(fe.set(n.prediction),de("/result"))}).catch(n=>{s(2,y="Error Processing image")}).finally(()=>s(1,D=!1))}return[e,D,y,h,E,x=>h(x)]}class be extends re{constructor(t){super(),ne(this,t,me,ue,se,{})}}export{be as component};
